
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>yield ã«ã¤ã„ã¦</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="../reveal.js/dist/theme/black.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../reveal.js/plugin/highlight/zenburn.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/common.css" />
    <link rel="stylesheet" type="text/css" href="../_static/Font-Awesome/css/all.min.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æ¤œç´¢" href="../search.html" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ftnext" />
    <meta property="og:url" content="https://ftnext.github.io/2021_slides/rakus_Feb_pythontips/about_yield.html" />
    <meta property="og:title" content="yield ã«ã¤ã„ã¦" />
    <meta property="og:description" content="2021/02 ãƒ©ã‚¯ã‚¹ Python Tips LTä¼š ã‚¹ãƒ©ã‚¤ãƒ‰" />



  </head><body>
    <div class="reveal">
        <div class="slides">
            <section >
<h1><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h1>
<dl class="field-list simple">
<dt class="field-odd">Event</dt>
<dd class="field-odd"><p>ãƒ©ã‚¯ã‚¹ Python Tips LTä¼š</p>
</dd>
<dt class="field-even">Presented</dt>
<dd class="field-even"><p>2021/02/25 nikkie</p>
</dd>
</dl>
</section>
<section >
<h2>â“ Questionï¼ˆãƒãƒ£ãƒƒãƒˆãŠé¡˜ã„ã—ã¾ã™ğŸ™ï¼‰</h2>
<p>ãµã ã‚“ <code class="docutils literal notranslate"><span class="pre">yield</span></code> ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿ</p>
<ul class="simple">
<li><p>ã‚¬ãƒƒãƒ„ãƒªğŸ’ª</p></li>
<li><p>ãŸã¾ã«ğŸ˜ƒ</p></li>
<li><p>åˆè€³ï¼ğŸ‘‚</p></li>
</ul>
</section>
<section>
<section >
<h2>ãŠå‰ã€èª°ã‚ˆ</h2>
<ul class="simple">
<li><p>æˆ‘ãŒåã¯ <strong>ã«ã£ããƒ¼</strong> ï¼ˆ<span class="raw-html"><i class="fab fa-twitter"></i></span> <a class="reference external" href="https://twitter.com/ftnext">&#64;ftnext</a> / <span class="raw-html"><i class="fab fa-github"></i></span> <a class="reference external" href="https://github.com/ftnext">&#64;ftnext</a>ï¼‰</p></li>
<li><p>Pythonæ­´3å¹´ã€‚ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆãªã†</p></li>
<li><p>Love anime!!ï¼ˆï¼ ã€€ğŸºğŸ·ğŸ”¥ã€€ğŸŒˆã€€ğŸ”ğŸ•ã€€ğŸ‘©â€ğŸ¨ğŸ¯ğŸŸï¼‰</p></li>
<li><p><strong>tips</strong>: Pythonç•Œéšˆã§ã¯ <em>è‡ªå·±ç´¹ä»‹ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹</em> ãŒã€ŒãŠå‰ã€èª°ã‚ˆã€ï¼ˆ<a class="reference external" href="https://www.ianlewis.org/jp/pycon-mini-jp">ãƒ«ãƒ¼ãƒ„</a>ï¼‰</p></li>
</ul>
</section>
<section >
<h3>ãŠå‰ã€èª°ã‚ˆ Ã— tips</h3>
<p>é–¢ã‚ã£ã¦ã„ã‚‹Pythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</p>
<ul class="simple">
<li><p>æ¯æœˆç¬¬2æ°´æ›œã® <a class="reference external" href="https://startpython.connpass.com/">ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š</a></p></li>
<li><p>Pythonã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ PyCon JP ã® <a class="reference external" href="https://youtube.com/playlist?list=PLMkWB0UjwFGkgC4eCjltRKD1HS_eups9A">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</a></p></li>
</ul>
<p>PyCon JP 2021åº§é•·ã§ã™ã€‚<a class="reference external" href="https://pyconjp.blogspot.com/2021/01/2021-staff-application-start.html">ã‚¹ã‚¿ãƒƒãƒ•å‹Ÿé›†ä¸­</a>ï¼ğŸ“£</p>
</section>
</section>
<section >
<h2>LTï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<p>Python Tipsã¨èã„ã¦ã€æµ®ã‹ã‚“ã ãƒã‚¿ã®1ã¤ãŒ <code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ã—ãŸ</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¨ã¯</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚ˆã</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã“ã‚“ãªã“ã¨ã¾ã§</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> åˆ¥ã®ä½¿ã„æ–¹</p></li>
</ul>
</section>
<section>
<section >
<h2><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> <strong>ã¨ã¯</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚ˆã</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã“ã‚“ãªã“ã¨ã¾ã§</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> åˆ¥ã®ä½¿ã„æ–¹ï¼ˆAppendixï¼‰</p></li>
</ul>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã®ç°¡å˜ãªä¾‹</h3>
<pre><code data-trim data-noescape data-line-numbers class="python">
def easy_generator():
    yield &quot;ğŸ‘©&quot;
    yield &quot;ğŸ¯&quot;
    yield &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3>ç”¨èªã€Œã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã€</h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚’ä½¿ã£ãŸ <strong>é–¢æ•°</strong> ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/glossary.html#term-generator">ç”¨èªé›†</a>ï¼‰</p></li>
<li><p>ä¾‹ï¼šå…ˆã®é–¢æ•° <code class="docutils literal notranslate"><span class="pre">easy_generator</span></code> ã‚‚ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿</p></li>
</ul>
<aside class="notes">
doctestã‚’é€šã™ãŸã‚ã®ä¸‹æº–å‚™
&gt;&gt;&gt; def easy_generator():
...     yield &quot;ğŸ‘©&quot;
...     yield &quot;ğŸ¯&quot;
...     yield &quot;ğŸŸ&quot;</aside>
</section>
<section >
<h3>ã‚‚ã†ä¸€ã¤ã®ç”¨èªã€Œã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã€</h3>
<ul class="simple">
<li><p>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿é–¢æ•°ã® <strong>è¿”ã‚Šå€¤</strong> ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/glossary.html#term-generator-iterator">ç”¨èªé›†</a>ï¼‰</p></li>
</ul>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g = easy_generator()  # gã¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿
&gt;&gt;&gt; type(g)
&lt;class 'generator'&gt;</code></pre>
</section>
<section >
<h3>çµ„ã¿è¾¼ã¿é–¢æ•° <code class="docutils literal notranslate"><span class="pre">next</span></code> ã§æ¬¡ã®è¦ç´ ã‚’å–å¾—</h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">next</span></code> ã¯ã€<em>ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿</em> ã® <code class="docutils literal notranslate"><span class="pre">__next__()</span></code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã€æ¬¡ã®è¦ç´ ã‚’å–å¾—ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/library/functions.html#next">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ï¼‰</p></li>
</ul>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; next(g)  # ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®æ¬¡ã®è¦ç´ 
'ğŸ‘©'</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ä¸€æ™‚åœæ­¢</h3>
<p><code class="docutils literal notranslate"><span class="pre">next(g)</span></code> ã§ 2è¡Œç›®ã® <code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§å€¤ãŒè¿”ã•ã‚Œã€<strong>ä¸€æ™‚åœæ­¢</strong></p>
<pre><code data-trim data-noescape data-line-numbers="2" class="python">
def easy_generator():
    yield &quot;ğŸ‘©&quot;  # ğŸ‘ˆ
    yield &quot;ğŸ¯&quot;
    yield &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3>å†é–‹ &amp; ä¸€æ™‚åœæ­¢</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; next(g)  # æ¬¡ã®è¦ç´ 
'ğŸ¯'</code></pre>
<pre><code data-trim data-noescape data-line-numbers="3" class="python">
def easy_generator():
    yield &quot;ğŸ‘©&quot;
    yield &quot;ğŸ¯&quot;  # ğŸ‘ˆ
    yield &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3>å†åº¦ å†é–‹ &amp; ä¸€æ™‚åœæ­¢</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; next(g)  # æ¬¡ã®è¦ç´ 
'ğŸŸ'</code></pre>
<pre><code data-trim data-noescape data-line-numbers="4" class="python">
def easy_generator():
    yield &quot;ğŸ‘©&quot;
    yield &quot;ğŸ¯&quot;
    yield &quot;ğŸŸ&quot;  # ğŸ‘ˆ</code></pre>
</section>
<section >
<h3>æ¬¡ãŒãªã„æ™‚ï¼š<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> ä¾‹å¤–ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/library/exceptions.html#StopIteration">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ï¼‰</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; next(g)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration</code></pre>
</section>
<section >
<h3>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¯ <code class="docutils literal notranslate"><span class="pre">for</span></code> æ–‡ã§ç¹°ã‚Šè¿”ã›ã‚‹</h3>
<p>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ <strong>ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿</strong></p>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; for item in easy_generator():
...     print(item)
...
ğŸ‘©
ğŸ¯
ğŸŸ</code></pre>
<p><strong>tips</strong>: <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> ä¾‹å¤–ã¯ç¹°ã‚Šè¿”ã—ã®ä»•çµ„ã¿ã«é–¢ä¿‚ï¼ˆ<a class="reference external" href="https://www.slideshare.net/shimizukawa/how-does-python-get-the-length-with-the-len-function">PyCon JP 2017 ãƒˆãƒ¼ã‚¯</a>ï¼‰</p>
</section>
</section>
<section>
<section >
<h2><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¨ã¯</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> <strong>ã‚ˆã</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã“ã‚“ãªã“ã¨ã¾ã§</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> åˆ¥ã®ä½¿ã„æ–¹ï¼ˆAppendixï¼‰</p></li>
</ul>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">yield</span></code> ä½•ãŒã„ã„ã®ï¼Ÿ</h3>
<p>ãƒªã‚¹ãƒˆã‚‚ <code class="docutils literal notranslate"><span class="pre">for</span></code> æ–‡ã§ç¹°ã‚Šè¿”ã›ã‚‹</p>
<pre><code data-trim data-noescape  class="python">
def return_list():
    return [&quot;ğŸ‘©&quot;, &quot;ğŸ¯&quot;, &quot;ğŸŸ&quot;]</code></pre>
<aside class="notes">
doctestã‚’é€šã™ãŸã‚ã®ä¸‹æº–å‚™
&gt;&gt;&gt; def return_list():
...     return [&quot;ğŸ‘©&quot;, &quot;ğŸ¯&quot;, &quot;ğŸŸ&quot;]</aside>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; for item in return_list():
...     print(item)
...
ğŸ‘©
ğŸ¯
ğŸŸ</code></pre>
</section>
<section >
<h3>ãƒªã‚¹ãƒˆã®å ´åˆã¨ <code class="docutils literal notranslate"><span class="pre">yield</span></code> ã®æ¯”è¼ƒï¼ˆAppendixã§å®Ÿé¨“ï¼‰</h3>
<ul class="simple">
<li><p>ãƒªã‚¹ãƒˆã®å ´åˆã¯ã™ã¹ã¦ã®è¦ç´ ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿æŒã™ã‚‹</p>
<ul>
<li><p>é•·ããªã„ãƒªã‚¹ãƒˆãªã‚‰ã„ã„ã®ã§ã™ãŒã€é•·ããªã‚‹ã¨ãƒ»ãƒ»ğŸ˜¢</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¯ <strong>ã™ã¹ã¦ãƒ¡ãƒ¢ãƒªã«å±•é–‹ã—ãªã„</strong> ğŸ‘ˆ tips!</p>
<ul>
<li><p>ä¸€æ™‚åœæ­¢ã«ã‚ˆã‚Šã€<strong>ä¸€åº¦ã«1ã¤ã®è¦ç´ </strong> ã‚’å‡¦ç†</p></li>
<li><p>ãƒªã‚¹ãƒˆã§å…¨è¦ç´ ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿æŒã™ã‚‹ã®ã«ã‹ã‹ã‚‹æ™‚é–“ãŒ <code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ã¯ç™ºç”Ÿã—ãªã„</p></li>
</ul>
</li>
</ul>
</section>
<section >
<h3>ä¾‹ï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿</h3>
<pre><code data-trim data-noescape data-line-numbers class="python">
def practical_generator(file_path):
    with open(file_path) as fh:
        for row in fh:
            yield row</code></pre>
</section>
<section >
<h3>ä¾‹ï¼šé•·ã„ãƒ•ã‚¡ã‚¤ãƒ«</h3>
<p>ãŸãã•ã‚“ã®è¡Œã‚’ã‚‚ã¤ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<code class="docutils literal notranslate"><span class="pre">example.txt</span></code>ï¼‰ãŒã‚ã‚Šã¾ã™</p>
<pre><code data-trim data-noescape  class="txt">
Kumiko
Haduki
Sapphire
Reina
:</code></pre>
<aside class="notes">
doctestã‚’é€šã™ãŸã‚ã®ä¸‹æº–å‚™
&gt;&gt;&gt; def practical_generator(file_path):
...     with open(file_path) as fh:
...         for row in fh:
...             yield row</aside>
</section>
<section >
<h3>ä¾‹ï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g = practical_generator(&quot;example.txt&quot;)
&gt;&gt;&gt; for member in g:
...     print(member.rstrip())  # å³å´ã«ä»˜ã \n ã‚’é™¤ã
...
Kumiko
Haduki</code></pre>
</section>
</section>
<section>
<section >
<h2><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¨ã¯</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚ˆã</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> <strong>ã“ã‚“ãªã“ã¨ã¾ã§</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> åˆ¥ã®ä½¿ã„æ–¹ï¼ˆAppendixï¼‰</p></li>
</ul>
</section>
<section >
<h3>åˆ¥ã®å†é–‹æ–¹æ³•</h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">next(g)</span></code> ï¼ˆ<code class="docutils literal notranslate"><span class="pre">g.__next__()</span></code>ï¼‰ã¯ã€ä¸€æ™‚åœæ­¢ã—ã¦ã„ãŸ <code class="docutils literal notranslate"><span class="pre">yield</span></code> ã®å¾Œã‹ã‚‰å†é–‹</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g.send()</span></code> ã§ <strong>å€¤ã‚’é€ã£ã¦ã€å†é–‹</strong> ã•ã›ã‚‰ã‚Œã‚‹</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¯é€ã‚‰ã‚ŒãŸå€¤ã‚’å—ã‘å–ã‚Œã‚‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">=</span> <span class="pre">yield</span> <span class="pre">&quot;ğŸ¯&quot;</span></code>ï¼‰</p></li>
</ul>
</li>
</ul>
</section>
<section >
<h3>å€¤ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’å¤‰æ›´</h3>
<pre><code data-trim data-noescape data-line-numbers class="python">
def send_example_generator():
    value = &quot;ğŸ¯&quot;
    while True:
        value = yield value
        if not value:
            break
        else:
            value = &quot;ğŸŸ&quot;</code></pre>
<aside class="notes">
doctestã‚’é€šã™ãŸã‚ã®ä¸‹æº–å‚™
&gt;&gt;&gt; def send_example_generator():
...     value = &quot;ğŸ¯&quot;
...     while True:
...         value = yield value
...         if not value:
...             break
...         else:
...             value = &quot;ğŸŸ&quot;</aside>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">send</span></code> ãƒ¡ã‚½ãƒƒãƒ‰</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g = send_example_generator()
&gt;&gt;&gt; g.send(None)  # é–‹å§‹ã™ã‚‹ã¨ãã¯Noneã‚’é€ã‚‹ï¼ˆnext(g)ã§ã‚‚é–‹å§‹ï¼‰
'ğŸ¯'</code></pre>
<pre><code data-trim data-noescape data-line-numbers="2,4" class="python">
def send_example_generator():
    value = &quot;ğŸ¯&quot;
    while True:
        value = yield value  # åˆæœŸå€¤ ğŸ¯ ãŒè¿”ã£ãŸ
        if not value:
            break
        else:
            value = &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">send</span></code> ãƒ¡ã‚½ãƒƒãƒ‰</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g.send(1)
'ğŸŸ'</code></pre>
<pre><code data-trim data-noescape data-line-numbers="4" class="python">
def send_example_generator():
    value = &quot;ğŸ¯&quot;
    while True:
        value = yield value  # valueã«1ãŒä»£å…¥ã•ã‚ŒãŸ
        if not value:
            break
        else:
            value = &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">send</span></code> ãƒ¡ã‚½ãƒƒãƒ‰</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g.send(&quot;False&quot;)
'ğŸŸ'</code></pre>
<pre><code data-trim data-noescape data-line-numbers="4" class="python">
def send_example_generator():
    value = &quot;ğŸ¯&quot;
    while True:
        value = yield value  # valueã«&quot;False&quot;ãŒä»£å…¥ã•ã‚ŒãŸ
        if not value:  # bool(value)ãŒFalseãªã‚‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿å®Ÿè¡Œã¯çµ‚äº†
            break
        else:
            value = &quot;ğŸŸ&quot;</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">send</span></code> ãƒ¡ã‚½ãƒƒãƒ‰</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; bool([])
False
&gt;&gt;&gt; g.send([])  # ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿å®Ÿè¡Œã‚’æ­¢ã‚ã‚‹
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration</code></pre>
</section>
</section>
<section>
<section >
<h2>ã¾ã¨ã‚ï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚’ä½¿ã£ãŸé–¢æ•°ï¼ <strong>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿</strong></p></li>
<li><p><strong>ä¸€æ™‚åœæ­¢</strong> &amp; ï¼ˆå€¤ã‚’é€ã£ã¦ï¼‰ <strong>å†é–‹</strong></p></li>
<li><p>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã®è¿”ã‚Šå€¤ã¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ <em>ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿</em></p></li>
<li><p>ãƒªã‚¹ãƒˆã‚’ä½¿ã£ã¦ç¹°ã‚Šè¿”ã™å ´åˆã¨æ¯”ã¹ã‚‹ã¨ã€å…¨è¦ç´ ã‚’ãƒ¡ãƒ¢ãƒªã«å±•é–‹ã—ãªã„ãŸã‚ <strong>çœãƒ¡ãƒ¢ãƒªãƒ»çœæ™‚é–“</strong></p></li>
</ul>
</section>
<section >
<h3>ã“ã®LTã§æ‰±ã£ãŸtips</h3>
<ul class="simple">
<li><p>Pythonç•Œéšˆã§ã¯ <strong>è‡ªå·±ç´¹ä»‹ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹</strong> ãŒã€ŒãŠå‰ã€èª°ã‚ˆã€</p></li>
<li><p>ç¬¬2æ°´æ›œ <a class="reference external" href="https://startpython.connpass.com/">ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š</a> ãƒ»<a class="reference external" href="https://www.youtube.com/user/PyConJP/playlists">PyCon JP ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> ä¾‹å¤–ã¯ <strong>ç¹°ã‚Šè¿”ã—ã®ä»•çµ„ã¿</strong> ã«é–¢ä¿‚</p></li>
<li><p>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ï¼ <code class="docutils literal notranslate"><span class="pre">with</span></code> ã¨ä¸€ç·’ã«ä½¿ãˆã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</p></li>
</ul>
</section>
<section >
<h3>ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</h3>
<p><strong>Enjoy</strong> development with <code class="docutils literal notranslate"><span class="pre">yield</span></code>!</p>
<p>Referencesã€<strong>Appendix</strong> ãŒç¶šãã¾ã™ï¼ˆã‚ˆã‚ã—ã‘ã‚Œã°ã©ã†ãï¼ï¼‰</p>
</section>
</section>
<section>
<section >
<h2>References 1/2 ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿é–¢é€£</h2>
<ul class="simple">
<li><p>è‡ªèº«ã‚’æŒã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã“ã† by é™¶å±±ã•ã‚“ï¼ˆ<a class="reference external" href="https://pyconjp.connpass.com/event/177586/">2020/07 Python Charity Talks</a>ï¼‰</p>
<ul>
<li><p><a class="reference external" href="https://docs.google.com/presentation/d/1qu3zFbzMh3AYhQ3DuDCDKbLlLqIrcklZdzi9fKyZPZQ/edit#slide=id.g7eca55c2c3_0_73">ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆ45æšç›®ï¼‰</a> ãƒ» <a class="reference external" href="https://youtu.be/o-UBokTvQjE?t=1196">YouTube</a></p></li>
</ul>
</li>
<li><p>Generators, coroutines, and nanoservices by Reuven M. Lerner (PyCon Africa 2020)</p>
<ul>
<li><p><a class="reference external" href="https://youtu.be/tkoaeVS2zRQ">YouTube</a> ãƒ» <a class="reference external" href="https://lerner.co.il/2020/05/08/making-sense-of-generators-coroutines-and-yield-from-in-python/">Blogãƒãƒ¼ã‚¸ãƒ§ãƒ³</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://realpython.com/list-comprehension-python/#choose-generators-for-large-datasets">When to Use a List Comprehension in Python (Choose Generators for Large Datasets)</a></p></li>
<li><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0255/">PEP 255 -- Simple Generators</a></p></li>
</ul>
</section>
<section >
<h3>References 2/2</h3>
<ul class="simple">
<li><p>The Enters and Exits of Context Managers by Mason Eggerï¼ˆ<a class="reference external" href="https://www.meetup.com/ja-JP/_ChiPy_/events/276239528/">2021/02 ChiPy</a>ï¼‰</p>
<ul>
<li><p><a class="reference external" href="https://youtu.be/vQlekAHqpBg?t=2686">YouTube</a> ãƒ» <a class="reference external" href="https://github.com/MasonEgger/context-managers-sample-code/blob/main/example08.py">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</a></p></li>
</ul>
</li>
<li><p>Pythonã¯ã©ã†ã‚„ã£ã¦lené–¢æ•°ã§é•·ã•ã‚’æ‰‹ã«ã„ã‚Œã¦ã„ã‚‹ã®ï¼Ÿ by æ¸…æ°´å·ã•ã‚“ï¼ˆPyCon JP 2017ï¼‰</p>
<ul>
<li><p><a class="reference external" href="https://www.slideshare.net/shimizukawa/how-does-python-get-the-length-with-the-len-function">ã‚¹ãƒ©ã‚¤ãƒ‰</a> ï¼ˆ33æšç›®ã‹ã‚‰ <code class="docutils literal notranslate"><span class="pre">for</span></code> ã®ä»•çµ„ã¿ï¼‰ãƒ»<a class="reference external" href="https://youtu.be/aich6wqftkA">YouTube</a></p></li>
</ul>
</li>
</ul>
</section>
</section>
<section >
<h2>Appendixï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> åˆ¥ã®ä½¿ã„æ–¹ï¼ˆæœ¬ç·¨ã«å…¥ã‚Šåˆ‡ã‚‰ãªã‹ã£ãŸè©±é¡Œï¼‰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã®tips</p></li>
<li><p>å¤§é‡ã®è¡Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†å®Ÿé¨“</p></li>
</ul>
</section>
<section>
<section >
<h2>ç•ªå¤–ç·¨ï¼š<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã«ã¤ã„ã¦</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã¨ã¯</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚ˆã</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã“ã‚“ãªã“ã¨ã¾ã§</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> <strong>åˆ¥ã®ä½¿ã„æ–¹</strong></p></li>
</ul>
</section>
<section >
<h3>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ <code class="docutils literal notranslate"><span class="pre">with</span></code> ã¨ä¸€ç·’ã«ä½¿ãˆã‚‹</h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contextlib.contextmanager</span></code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã«ä»˜ã‘ã‚‹ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/library/contextlib.html#contextlib.contextmanager">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ï¼‰</p></li>
<li><p><strong>tips</strong>: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ï¼ <code class="docutils literal notranslate"><span class="pre">with</span></code> ã¨ä¸€ç·’ã«ä½¿ãˆã‚‹ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/glossary.html#term-context-manager">ç”¨èªé›†</a>ï¼‰</p></li>
</ul>
</section>
<section >
<h3>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ã«ãªã£ãŸã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿</h3>
<pre><code data-trim data-noescape  class="python">
&#64;contextlib.contextmanager
def contextmanager_generator():
    # withã®ãƒ–ãƒ­ãƒƒã‚¯ã«å…¥ã‚‹å‰ã®å‡¦ç†ï¼ˆ__enter__ï¼‰

    yield  # å€¤ã‚’è¿”ã—ãŸã¨ãã¯ as ã§å—ã‘å–ã‚Œã‚‹

    # withã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŠœã‘ãŸç›´å¾Œã®å‡¦ç†ï¼ˆ__exit__ï¼‰</code></pre>
</section>
<section >
<h3>ã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆã€ã‚¼ãƒ­ã‹ã‚‰ä½œã‚‹Deep Learningâ‘¢ã€ã‚ˆã‚Šï¼‰</h3>
<p><code class="docutils literal notranslate"><span class="pre">with</span></code> ã®ä¸­ã§ã ã‘ã€<code class="docutils literal notranslate"><span class="pre">Config</span></code> ã®å±æ€§ã‚’æ›¸ãæ›ãˆï¼ˆ<a class="reference external" href="https://github.com/oreilly-japan/deep-learning-from-scratch-3/blob/master/steps/step18.py#L11">18ç« </a>ï¼‰</p>
<pre><code data-trim data-noescape data-line-numbers class="python">
&#64;contextlib.contextmanager
def using_config(name, value):
    old_value = getattr(Config, name)
    setattr(Config, name, value)
    try:
        yield
    finally:
        setattr(Config, name, old_value)</code></pre>
</section>
</section>
<section>
<section >
<h2><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã®tips</h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span> <span class="pre">&lt;ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿&gt;</span></code></p></li>
<li><p>ref: <a class="reference external" href="https://www.python.org/dev/peps/pep-0380/">PEP 380</a> Python 3.3ã€œ</p></li>
<li><p>ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ä¾‹ã‚’æ¬¡ã§æ›¸ãå¤‰ãˆã¾ã™</p></li>
</ul>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã§ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ä¾‹ã‚’æ›¸ãæ›ãˆ</h3>
<pre><code data-trim data-noescape data-line-numbers="5" class="python">
def practical_generator(file_path):
    with open(file_path) as fh:
        # for row in fh:
        #     yield row
        yield from fh</code></pre>
</section>
<section >
<h3>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ç¹°ã‚Šè¿”ã—ã¯1å›ã®ã¿</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; g = easy_generator()
&gt;&gt;&gt; for item in g:
...     print(item)
...
ğŸ‘©
ğŸ¯
ğŸŸ
&gt;&gt;&gt; for item in g:
...     print(item)
...</code></pre>
</section>
<section >
<h3>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ç¹°ã‚Šè¿”ã—ä½¿ã„ãŸã„</h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">itertools.tee</span></code> ï¼ˆ<a class="reference external" href="https://docs.python.org/ja/3/library/itertools.html#itertools.tee">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ï¼‰</p></li>
<li><p><em>ä¸€ã¤ã® iterable ã‹ã‚‰ n å€‹ã®ç‹¬ç«‹ã—ãŸã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚</em></p></li>
</ul>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; import itertools
&gt;&gt;&gt; g = easy_generator()
&gt;&gt;&gt; g1, g2 = itertools.tee(g)</code></pre>
</section>
<section >
<h3>ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ç¹°ã‚Šè¿”ã—ä½¿ã„ãŸã„</h3>
<pre><code data-trim data-noescape  class="python">
&gt;&gt;&gt; for item in g1:
...     print(item)
...
ğŸ‘©
ğŸ¯
ğŸŸ
&gt;&gt;&gt; for item in g2:
...     print(item)
...
ğŸ‘©
ğŸ¯
ğŸŸ</code></pre>
</section>
</section>
<section>
<section >
<h2>å¤§é‡ã®è¡Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†å®Ÿé¨“ï¼šãƒªã‚¹ãƒˆã¨ <code class="docutils literal notranslate"><span class="pre">yield</span></code></h2>
<p>10è¡Œã‚’ç¹°ã‚Šè¿”ã—ã¦è¡Œã®æ•°ãŒå¤šã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„</p>
<pre><code data-trim data-noescape  class="bash">
$ wc -l many_names_1b.txt  # 10å„„è¡Œï¼ï¼ˆ6.4GBï¼‰
 1000000000 many_names_1b.txt</code></pre>
</section>
<section >
<h3>å®Ÿé¨“ç’°å¢ƒ</h3>
<ul class="simple">
<li><p>MacBook Pro</p></li>
<li><p>ãƒ—ãƒ­ã‚»ã‚µ 2.3 GHz Intel Core i5ã€4ã‚³ã‚¢</p></li>
<li><p>ãƒ¡ãƒ¢ãƒª 16GB</p></li>
<li><p>Python 3.9.0</p></li>
</ul>
</section>
<section >
<h3>ãƒªã‚¹ãƒˆã‚’ä½¿ã£ãŸå ´åˆ</h3>
<pre><code data-trim data-noescape  class="bash">
$ time python compare_speed.py

real        21m47.461s
user        5m50.540s
sys 10m31.005s</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚’ä½¿ã£ãŸå ´åˆ</h3>
<pre><code data-trim data-noescape  class="bash">
$ time python compare_speed.py

real        3m42.741s
user        3m40.157s
sys 0m2.286s</code></pre>
</section>
<section >
<h3><code class="docutils literal notranslate"><span class="pre">time</span></code> ã‚³ãƒãƒ³ãƒ‰ã®çµæœã®è¦‹æ–¹</h3>
<ul class="simple">
<li><p>userï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ è‡ªä½“ã®å‡¦ç†æ™‚é–“</p></li>
<li><p>sysï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«ã€OSãŒå‡¦ç†ã‚’ã—ãŸæ™‚é–“</p></li>
<li><p>ref: <a class="reference external" href="https://qiita.com/tossh/items/659e5934e52b38183200">https://qiita.com/tossh/items/659e5934e52b38183200</a></p></li>
</ul>
</section>
<section >
<h3>è€ƒå¯Ÿ</h3>
<ul class="simple">
<li><p><strong>user</strong> ã‚’æ¯”ã¹ã‚‹ã¨ã€ãƒªã‚¹ãƒˆã®ã»ã†ãŒé•·ã„ -&gt; å…¨ã¦ã®è¦ç´ ã‚’ä¿æŒã™ã‚‹å‡¦ç†ã®æ™‚é–“ã¨è€ƒãˆã‚‰ã‚Œã‚‹</p></li>
<li><p><strong>sys</strong> ã‚’æ¯”ã¹ã‚‹ã¨ã€å¤§ããªå·® -&gt; ãƒ—ãƒ­ã‚°ãƒ©ãƒ å‡¦ç†ã§å·¨å¤§ãªãƒªã‚¹ãƒˆã‚’æ‰±ã†ãŸã‚ã«OSã®å‡¦ç†ãŒå¿…è¦ã«ãªã£ãŸã¨è€ƒãˆã¦ã„ã‚‹</p></li>
</ul>
<p>å¤§é‡ã®è¡Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã€<code class="docutils literal notranslate"><span class="pre">yield</span></code> ã‚’è©¦ã—ã¦ã¿ã¦ã¯ï¼Ÿ</p>
</section>
</section>
<section >
<h2>EOF</h2>
</section>

        </div>
    </div>
    
    <script src="../reveal.js/dist/reveal.js"></script>
    
    
      <script src="../reveal.js/plugin/highlight/highlight.js"></script>
      
    
    <script>
        var revealjsConfig = new Object();
        Object.assign(revealjsConfig, 
    {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: "none",
        slideNumber: "c/t",
    }
);
        
        
        
          revealjsConfig.plugins = [
            RevealHighlight,
          ];
        
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(revealjsConfig);
    </script>

  </body>
</html>
